<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>词语相关关系展示</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.4/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-cloud/1.2.5/d3.layout.cloud.min.js"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            margin: 0;
            padding: 20px;
            flex-direction: column;
            min-height: 100vh; /* 让body的高度始终为视口高度 */
    box-sizing: border-box; /* 让 padding 不影响布局 */
        }

        h1 {
            text-align: center;
      margin: 20px 0;
      font-size: 20px;
      color: rgb(51, 51, 51);
        }
        .description {
            text-align: center;
            font-size: 14px;
            color: #666666;
            margin-top: 5px;
        }

        .container {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            max-width: 1200px;
            margin-top: 30px;
        }

        #wordcloud {
            width: 60%;
            height: 600px;
            position: relative;
            margin: 0 auto; /* 保持水平居中 */
        }
        .word {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .word:hover {
            background-color: #e8f5e9; /* 鼠标悬停背景色柔和绿色 */
            font-weight: bold;  
            text-shadow: 1px 1px 6px rgba(5, 249, 159, 0.3);
        }


        #related-words {
            display: none; /* 初始隐藏 */
            width: 35%;
            padding: 25px;
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
            font-family: 'Arial', sans-serif;
            max-height: 600px;
            overflow-y: auto;
        }

        #related-words h2 {
            font-size: 1.6em;
            color: #00796b;
            margin-bottom: 20px;
            text-transform: uppercase;
        }

        #related-words .word {
            font-size: 1.2em;
            margin: 10px 0;
            padding: 8px 12px;
            background-color: #e0f7fa;
            border-radius: 6px;
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
                align-items: center;
            }
            #wordcloud {
                width: 100%;
                height: 500px;
            }
            #related-words {
                width: 100%;
                margin-top: 20px;
            }
        }
    </style>
</head>
<body>
    <h1>词语相关关系展示</h1>
    <p class="description">政管老师截止2024年10月的所有论文中摘要的分词，取前50个高频词使用wordvector取最相关的词语进行展示。说明了各主题间的相关性与相关系数，为论文展示与主题提供相关思路。</p>
    <div class="container">
        <div id="related-words"></div>
        <div id="wordcloud"></div>
    </div>

    <script>

        const wordData = [
        {"word": "治理", "frequency": 547},
{"word": "中国", "frequency": 364},
{"word": "发展", "frequency": 350},
{"word": "社会", "frequency": 324},
{"word": "政治", "frequency": 273},
{"word": "政策", "frequency": 251},
{"word": "制度", "frequency": 249},
{"word": "研究", "frequency": 244},
{"word": "重要", "frequency": 169},
{"word": "政府", "frequency": 169},
{"word": "影响", "frequency": 167},
{"word": "体系", "frequency": 162},
{"word": "理论", "frequency": 159},
{"word": "城市", "frequency": 155},
{"word": "组织", "frequency": 149},
{"word": "建设", "frequency": 149},
{"word": "关系", "frequency": 140},
{"word": "公共", "frequency": 138},
{"word": "全球", "frequency": 137},
{"word": "现代化", "frequency": 137},
{"word": "服务", "frequency": 136},
{"word": "国际", "frequency": 134},
{"word": "过程", "frequency": 133},
{"word": "实现", "frequency": 132},
{"word": "政党", "frequency": 131},
{"word": "机制", "frequency": 129},
{"word": "分析", "frequency": 126},
{"word": "技术", "frequency": 125},
{"word": "问题", "frequency": 116},
{"word": "经济", "frequency": 113},
{"word": "基层", "frequency": 111},
{"word": "能源", "frequency": 110},
{"word": "战略", "frequency": 108},
{"word": "实践", "frequency": 105},
{"word": "能力", "frequency": 103},
{"word": "基础", "frequency": 102},
{"word": "居民", "frequency": 100},
{"word": "乡村", "frequency": 98},
{"word": "安全", "frequency": 97},
{"word": "创新", "frequency": 97},
{"word": "进行", "frequency": 96},
{"word": "数字", "frequency": 96},
{"word": "社会主义", "frequency": 95},
{"word": "推进", "frequency": 94},
{"word": "路径", "frequency": 91},
{"word": "气候", "frequency": 90},
{"word": "提升", "frequency": 87},
{"word": "时代", "frequency": 87},
{"word": "推动", "frequency": 87},
{"word": "作用", "frequency": 86},
        ];

        const relatedWordsData = {
            "治理": [['话语', 0.9998], ['之间', 0.9998], ['世界', 0.9998], ['逻辑', 0.9998], ['具有', 0.9998], ['地区', 0.9998], ['构建', 0.9998], ['成为', 0.9998], ['危机', 0.9998]],
"中国": [['话语', 0.9998], ['世界', 0.9998], ['之间', 0.9998], ['逻辑', 0.9998], ['地区', 0.9998], ['具有', 0.9998], ['我国', 0.9998], ['成为', 0.9998], ['空间', 0.9998], ['构建', 0.9998]],
"发展": [['话语', 0.9998], ['之间', 0.9998], ['世界', 0.9998], ['逻辑', 0.9998], ['具有', 0.9998], ['地区', 0.9998], ['我国', 0.9998], ['空间', 0.9998]],
"社会": [['之间', 0.9998], ['话语', 0.9998], ['世界', 0.9998], ['逻辑', 0.9998], ['我国', 0.9998], ['空间', 0.9998], ['地区', 0.9998], ['构建', 0.9998]],
"政治": [['话语', 0.9998], ['之间', 0.9998], ['世界', 0.9998], ['逻辑', 0.9998], ['地区', 0.9998], ['具有', 0.9998], ['美国', 0.9998], ['我国', 0.9998], ['构建', 0.9998]],
"政策": [['话语', 0.9998], ['之间', 0.9998], ['逻辑', 0.9998], ['世界', 0.9998], ['地区', 0.9998], ['空间', 0.9998], ['具有', 0.9998], ['我国', 0.9998], ['层面', 0.9998]],
"制度": [['话语', 0.9998], ['之间', 0.9998], ['世界', 0.9998], ['逻辑', 0.9998], ['地区', 0.9998], ['具有', 0.9998], ['我国', 0.9998], ['构建', 0.9998]],
"研究": [['之间', 0.9998], ['话语', 0.9998], ['逻辑', 0.9998], ['世界', 0.9998], ['我国', 0.9998], ['具有', 0.9998], ['地区', 0.9998], ['合作', 0.9998], ['空间', 0.9998], ['成为', 0.9998], ['层面', 0.9998]],
"重要": [['话语', 0.9998], ['世界', 0.9998], ['之间', 0.9998], ['逻辑', 0.9998], ['具有', 0.9998], ['我国', 0.9998], ['地区', 0.9998], ['构建', 0.9998], ['合作', 0.9998], ['提供', 0.9998]],
"政府": [['之间', 0.9998], ['我国', 0.9998], ['话语', 0.9998], ['逻辑', 0.9998], ['世界', 0.9998], ['具有', 0.9998], ['层面', 0.9998], ['空间', 0.9998], ['地区', 0.9998]],
"影响": [['之间', 0.9998], ['话语', 0.9998], ['世界', 0.9998], ['逻辑', 0.9998], ['我国', 0.9998], ['空间', 0.9998], ['具有', 0.9998], ['地区', 0.9998]],
"体系": [['话语', 0.9998], ['之间', 0.9997], ['逻辑', 0.9997], ['具有', 0.9997], ['地区', 0.9997], ['世界', 0.9997], ['成为', 0.9997], ['空间', 0.9997], ['方面', 0.9997], ['构建', 0.9997]],
"理论": [['话语', 0.9998], ['世界', 0.9998], ['之间', 0.9998], ['逻辑', 0.9998], ['具有', 0.9998], ['地区', 0.9998], ['空间', 0.9998], ['合作', 0.9998], ['我国', 0.9998]],
"城市": [['之间', 0.9998], ['世界', 0.9998], ['话语', 0.9998], ['逻辑', 0.9998], ['我国', 0.9998], ['空间', 0.9998], ['层面', 0.9998], ['地区', 0.9998], ['具有', 0.9998], ['成为', 0.9998]],
"组织": [['话语', 0.9998], ['之间', 0.9998], ['逻辑', 0.9998], ['世界', 0.9998], ['我国', 0.9998], ['具有', 0.9998], ['地区', 0.9998], ['层面', 0.9998], ['空间', 0.9998], ['成为', 0.9998]],
"建设": [['话语', 0.9998], ['之间', 0.9998], ['世界', 0.9998], ['逻辑', 0.9998], ['具有', 0.9998], ['地区', 0.9998], ['空间', 0.9998], ['构建', 0.9998]],
"关系": [['之间', 0.9998], ['世界', 0.9998], ['话语', 0.9998], ['逻辑', 0.9998], ['具有', 0.9998], ['构建', 0.9998], ['合作', 0.9998], ['空间', 0.9998], ['地区', 0.9998]],
"公共": [['之间', 0.9997], ['空间', 0.9997], ['逻辑', 0.9997], ['具有', 0.9997], ['世界', 0.9997], ['话语', 0.9997], ['我国', 0.9997], ['成为', 0.9997], ['地区', 0.9997]],
"全球": [['话语', 0.9997], ['合作', 0.9997], ['之间', 0.9997], ['危机', 0.9997], ['世界', 0.9997], ['转型', 0.9997], ['地区', 0.9997], ['逻辑', 0.9997], ['具有', 0.9997], ['环境', 0.9997], ['成为', 0.9997]],
"现代化": [['话语', 0.9997], ['之间', 0.9997], ['逻辑', 0.9997], ['世界', 0.9997], ['具有', 0.9997], ['构建', 0.9997], ['我国', 0.9997], ['层面', 0.9997]],
"服务": [['之间', 0.9998], ['我国', 0.9997], ['世界', 0.9997], ['话语', 0.9997], ['具有', 0.9997], ['逻辑', 0.9997], ['层面', 0.9997], ['成为', 0.9997], ['地区', 0.9997], ['空间', 0.9997]],
"国际": [['话语', 0.9998], ['之间', 0.9998], ['逻辑', 0.9998], ['世界', 0.9998], ['美国', 0.9997], ['地区', 0.9997], ['核心', 0.9997], ['我国', 0.9997], ['具有', 0.9997]],
"过程": [['话语', 0.9998], ['逻辑', 0.9998], ['之间', 0.9998], ['世界', 0.9998], ['具有', 0.9997], ['地区', 0.9997], ['我国', 0.9997], ['构建', 0.9997], ['合作', 0.9997]],
"实现": [['之间', 0.9998], ['逻辑', 0.9998], ['话语', 0.9998], ['世界', 0.9998], ['具有', 0.9998], ['地区', 0.9998], ['成为', 0.9998], ['我国', 0.9998], ['空间', 0.9997], ['层面', 0.9997]],
"政党": [['话语', 0.9998], ['逻辑', 0.9998], ['世界', 0.9997], ['之间', 0.9997], ['地区', 0.9997], ['具有', 0.9997], ['美国', 0.9997], ['构建', 0.9997], ['我国', 0.9997], ['空间', 0.9997], ['危机', 0.9997]],
"机制": [['话语', 0.9998], ['逻辑', 0.9998], ['之间', 0.9998], ['世界', 0.9998], ['具有', 0.9998], ['地区', 0.9998], ['我国', 0.9998], ['合作', 0.9998], ['空间', 0.9997], ['美国', 0.9997]],
"分析": [['之间', 0.9998], ['话语', 0.9998], ['逻辑', 0.9998], ['地区', 0.9998], ['我国', 0.9997], ['层面', 0.9997], ['世界', 0.9997], ['空间', 0.9997], ['具有', 0.9997]],
"技术": [['之间', 0.9997], ['世界', 0.9997], ['话语', 0.9997], ['空间', 0.9997], ['逻辑', 0.9997], ['层面', 0.9997], ['我国', 0.9997], ['地区', 0.9997], ['具有', 0.9997], ['构建', 0.9997]],
"问题": [['之间', 0.9998], ['话语', 0.9998], ['世界', 0.9998], ['逻辑', 0.9998], ['我国', 0.9998], ['具有', 0.9998], ['地区', 0.9998], ['空间', 0.9998], ['层面', 0.9998], ['构建', 0.9998]],
"经济": [['话语', 0.9998], ['世界', 0.9998], ['之间', 0.9997], ['逻辑', 0.9997], ['地区', 0.9997], ['具有', 0.9997], ['危机', 0.9997], ['层面', 0.9997], ['成为', 0.9997], ['构建', 0.9997]],
"基层": [['之间', 0.9997], ['话语', 0.9997], ['逻辑', 0.9996], ['世界', 0.9996], ['构建', 0.9996], ['主体', 0.9996], ['具有', 0.9996], ['地区', 0.9996]],
"能源": [['合作', 0.9996], ['转型', 0.9996], ['危机', 0.9996], ['逻辑', 0.9995], ['话语', 0.9995], ['世界', 0.9995], ['成为', 0.9995], ['地区', 0.9995], ['之间', 0.9995], ['美国', 0.9995]],
"战略": [['话语', 0.9997], ['美国', 0.9997], ['地区', 0.9997], ['世界', 0.9997], ['之间', 0.9997], ['构建', 0.9997], ['具有', 0.9997], ['逻辑', 0.9996], ['空间', 0.9996], ['成为', 0.9996], ['我国', 0.9996], ['合作', 0.9996]],
"实践": [['话语', 0.9998], ['逻辑', 0.9998], ['之间', 0.9998], ['具有', 0.9998], ['世界', 0.9998], ['我国', 0.9997], ['地区', 0.9997], ['构建', 0.9997], ['合作', 0.9997], ['层面', 0.9997], ['提供', 0.9997]],
"能力": [['话语', 0.9997], ['之间', 0.9997], ['世界', 0.9997], ['逻辑', 0.9997], ['具有', 0.9997], ['地区', 0.9997], ['空间', 0.9997], ['构建', 0.9997], ['成为', 0.9997], ['转型', 0.9997]],
"基础": [['话语', 0.9998], ['世界', 0.9998], ['逻辑', 0.9998], ['之间', 0.9998], ['地区', 0.9997], ['具有', 0.9997], ['成为', 0.9997], ['美国', 0.9997], ['构建', 0.9997]],
"居民": [['之间', 0.9998], ['我国', 0.9997], ['逻辑', 0.9997], ['话语', 0.9997], ['世界', 0.9997], ['空间', 0.9997], ['地区', 0.9997], ['具有', 0.9997], ['层面', 0.9997], ['成为', 0.9997]],
"乡村": [['之间', 0.9996], ['话语', 0.9996], ['具有', 0.9996], ['世界', 0.9996], ['逻辑', 0.9996], ['层面', 0.9996], ['提供', 0.9996], ['空间', 0.9996], ['转型', 0.9996], ['我国', 0.9996]],
"安全": [['话语', 0.9998], ['世界', 0.9997], ['之间', 0.9997], ['转型', 0.9997], ['地区', 0.9997], ['合作', 0.9997], ['逻辑', 0.9997], ['危机', 0.9997], ['空间', 0.9997], ['具有', 0.9997]],
"创新": [['之间', 0.9998], ['话语', 0.9998], ['具有', 0.9997], ['逻辑', 0.9997], ['世界', 0.9997], ['地区', 0.9997], ['合作', 0.9997], ['美国', 0.9997], ['提供', 0.9997]],
"进行": [['话语', 0.9998], ['逻辑', 0.9998], ['之间', 0.9998], ['世界', 0.9998], ['具有', 0.9998], ['我国', 0.9998], ['地区', 0.9998], ['合作', 0.9997], ['层面', 0.9997]],
"数字": [['话语', 0.9997], ['之间', 0.9997], ['逻辑', 0.9997], ['空间', 0.9997], ['世界', 0.9997], ['我国', 0.9997], ['提供', 0.9997], ['具有', 0.9997], ['风险', 0.9997]],
"社会主义": [['世界', 0.9998], ['话语', 0.9998], ['之间', 0.9997], ['我国', 0.9997], ['具有', 0.9997], ['地区', 0.9997], ['逻辑', 0.9997], ['空间', 0.9997], ['合作', 0.9997]],
"推进": [['话语', 0.9998], ['世界', 0.9998], ['之间', 0.9998], ['逻辑', 0.9997], ['地区', 0.9997], ['具有', 0.9997], ['我国', 0.9997], ['合作', 0.9997]],
"路径": [['话语', 0.9997], ['世界', 0.9997], ['之间', 0.9997], ['逻辑', 0.9997], ['具有', 0.9997], ['我国', 0.9997], ['空间', 0.9997], ['地区', 0.9997], ['美国', 0.9997], ['合作', 0.9997], ['转型', 0.9997]],
"气候": [['话语', 0.9997], ['合作', 0.9996], ['世界', 0.9996], ['之间', 0.9996], ['地区', 0.9996], ['危机', 0.9996], ['转型', 0.9996], ['成为', 0.9996], ['逻辑', 0.9996], ['环境', 0.9996]],
"提升": [['话语', 0.9998], ['之间', 0.9998], ['世界', 0.9997], ['具有', 0.9997], ['地区', 0.9997], ['合作', 0.9997], ['逻辑', 0.9997], ['成为', 0.9997], ['我国', 0.9997], ['危机', 0.9997]],
"时代": [['话语', 0.9997], ['世界', 0.9997], ['之间', 0.9997], ['成为', 0.9997], ['逻辑', 0.9997], ['空间', 0.9997], ['地区', 0.9997], ['美国', 0.9997], ['具有', 0.9997], ['层面', 0.9997]],
"推动": [['话语', 0.9998], ['之间', 0.9998], ['世界', 0.9998], ['逻辑', 0.9998], ['具有', 0.9997], ['地区', 0.9997], ['空间', 0.9997], ['构建', 0.9997], ['合作', 0.9997], ['核心', 0.9997], ['转型', 0.9997]],
"作用": [['话语', 0.9998], ['之间', 0.9998], ['逻辑', 0.9998], ['具有', 0.9997], ['世界', 0.9997], ['我国', 0.9997], ['地区', 0.9997], ['成为', 0.9997], ['构建', 0.9997], ['合作', 0.9997], ['空间', 0.9997]],

        };

        const wordcloudDiv = document.getElementById("wordcloud");
        const relatedWordsDiv = document.getElementById("related-words");

        const width = 500;
        const height = 400;

        const fontSizeScale = d3.scaleLinear()
            .domain([d3.min(wordData, d => d.frequency), d3.max(wordData, d => d.frequency)])
            .range([20, 100]);

        const svg = d3.select("#wordcloud")
            .append("svg")
            .attr("width", width)
            .attr("height", height);

        const layout = d3.layout.cloud()
            .size([width, height])
            .words(wordData.map(d => ({ text: d.word, size: fontSizeScale(d.frequency) })))
            .padding(5)
            .rotate(0)
            .font("Arial")
            .fontSize(d => d.size)
            .on("end", draw);

        layout.start();

        function draw(words) {
            const centerX = width / 2;
            const centerY = height / 2;

            svg.selectAll(".word")
                .data(words)
                .enter()
                .append("text")
                .attr("class", "word")
                .attr("text-anchor", "middle")
                .attr("x", d => centerX + d.x)
                .attr("y", d => centerY + d.y)
                .style("font-size", d => d.size + "px")
                .style("fill", "#00796b")
                .text(d => d.text)
                .on("click", (event, d) => showRelatedWords(d.text));
        }

        function showRelatedWords(word) {
            relatedWordsDiv.innerHTML = `<h2>${word} 的相关词：</h2>`;
            relatedWordsData[word].forEach(([relatedWord, correlation]) => {
                relatedWordsDiv.innerHTML += `<div class="word">${relatedWord}: ${correlation.toFixed(4)}</div>`;
            });
            relatedWordsDiv.style.display = "block";
        }

        // 添加全局点击监听器，用于返回只显示词云图
    document.body.addEventListener('click', function(e) {
        if (e.target.closest('#related-words') || e.target.closest('.word')) return; // 如果点击在相关词区域或词云中的词，保持当前界面
        relatedWordsDiv.style.display = "none";
        wordcloudDiv.style.width = "100%";
    });
    </script>
</body>
</html>
